# ctrl-files-py
これは、**指定ディレクトリ（`\file\rename`ディレクトリ）内のファイル名一括リネーム・ファイル選択・ディレクトリ移動**を対話的に実行できるPythonユーティリティ集です。<br>
コマンドラインからの入力により、柔軟かつ安全にファイル整理や命名規則の統一作業を自動化できます。

---

> [!NOTE]
> ルート直下に`\file\rename`ディレクトリを作成してください。この`rename`ディレクトリ（パス）が処理対象フォルダになります。
> ターミナル（コマンドプロンプト）で以下コマンドを実行することで自動的に当該ディレクトリを作成することもできます。
```bash
# utils ディレクトリに移動
cd utils

# rename_files_sys.py を実行
python rename_files_sys.py
```

---

## 主な機能
- **ファイル名の一括リネーム**
  - 指定した文字列の置換（部分置換）
  - 以下機能は **`rename_files_sys.py`を単体実行** する場合
    - ナンバリング（連番付与）
    - 全置換または部分置換
    - ファイル名の先頭・末尾への文字列追加
      - ファイル名の先頭に当日（yyyymmdd）を表記

- **拡張子によるファイル選択**
  - 特定の拡張子を持つファイルのみを対象に処理可能
  - サブディレクトリも含めた再帰的な検索に対応

- **ディレクトリ移動・作成**
  - 指定したディレクトリへのファイル移動
  - 必要に応じてディレクトリを自動作成

- **バックアップ機能**
  - リネームや移動前に元ファイルのバックアップ（`.bak`拡張子）を自動生成
  - 失敗時のリカバリが容易

- **対話的な操作性**
  - `main.py`を実行することで、必要な情報を順に入力しながら処理を進められる
  - 入力内容に応じて処理内容を自動判別

## 利用イメージ
1. コマンドラインで`main.py`を実行
2. 対話形式でリネーム対象・新しい名前・移動先ディレクトリ・対象拡張子などを入力
3. 入力内容に応じて、リネーム・ファイル選択・ディレクトリ移動などの処理が自動実行される

## 想定用途
- 大量のファイル名の一括変換や整理
- プロジェクトや業務での命名規則統一
- ファイルの分類・移動・バックアップの自動化

## バックアップファイル（.bak）からの復元フロー
1. リネームや移動処理を実行すると、元ファイルのバックアップ（`.bak`拡張子付き）が自動生成されます。<br>
（例: `sample.txt` → `sample.txt.bak`）
2. 万が一リネームや移動後のファイルに問題があった場合は、`.bak`ファイルを元のファイル名に戻すことで簡単に復元できます。
3. 復元手順例（コマンドラインの場合）:
   - **Windows:**
```powershell
rename sample.txt.bak sample.txt
```
   - **macOS/Linux:**
```bash
mv sample.txt.bak sample.txt
```
4. 複数ファイルを一括で復元する場合は、バッチやシェルスクリプトを利用してください。
5. `.bak`ファイルは元ファイルと同じディレクトリに保存されます。不要になった場合は手動で削除してください。

## 備忘録
- Pythonではファイル名に`-`を用いることは不可能なので、他の変数定義や関数定義の命名にならって`_`（アンダースコア）が無難
- **初期化順序の問題（モジュールの初期化時に依存関係が適切に解決されないこと）なのか`ModuleNotFoundError`が発生する**ケースがあった。応急処置として、一つのファイルにモジュールを包含して（関係する関数やモジュールをまとめて）いたものたちを別々のモジュールに分離させた
- モジュールの呼び出しファイルの配置箇所（ディレクトリ階層）によって**インポートエラーや`ModuleNotFoundError`が発生する**ケースがあった。原則`from モジュール名 import モジュールファイル名`という絶対インポートしたほうが無難
